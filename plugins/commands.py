

import os
from pyrogram import Client,filters 
from telegraph import upload_file



@Client.on_message(filters.command(["start"]))
async def start(client, message):
    await client.send_message(
        chat_id=message.chat.id,
        text=f"ğ—›ğ—²ğ—¹ğ—¹ğ—¼ {message.from_user.first_name},\n<b>ğ—œ'ğ—º ğ—® ğ—§ğ—²ğ—¹ğ—²ğ—´ğ—¿ğ—®ğ—º ğ—§ğ—¼ Telegra.ph ğ—œğ—ºğ—®ğ—´ğ—²/ğ—©ğ—¶ğ—±ğ—²ğ—¼ ğ—¨ğ—½ğ—¹ğ—¼ğ—®ğ—±ğ—²ğ—¿ ğ—•ğ—¼ğ˜. \n ğ—¢ğ˜„ğ—»ğ—²ğ—¿ By @HydraLivegrambot</b> \n  Do /help ğ—™ğ—¼ğ—¿ ğ—ºğ—¼ğ—¿ğ—²",
        reply_to_message_id=message.message_id
    )

@Client.on_message(filters.command(["help"]))
async def help(client, message):
    await client.send_message(
        chat_id=message.chat.id,
        text=f"<b> ğ—¦ğ—²ğ—»ğ—± ğ— ğ—² ğ—”ğ—»ğ˜† ğ—©ğ—¶ğ—±ğ—²ğ—¼ ğ—¢ğ—¿ ğ—£ğ—µğ—¼ğ˜ğ—¼ ğ—œ'ğ—¹ğ—¹ ğ—¨ğ—½ğ—¹ğ—¼ğ—®ğ—± ğ—œğ˜ ğ—œğ—»ğ˜ğ—¼ Telegra.ph. \n ğ—¢ğ˜„ğ—»ğ—²ğ—¿ By @HydraLivegrambot</b>",
        reply_to_message_id=message.message_id
    )
    
@Client.on_message(filters.photo)
async def getimage(client, message):
    location = "./FILES"
    if not os.path.isdir(location):
        os.makedirs(location)
    imgdir = location + "/" + str(message.chat.id) + "/" + str(message.message_id) +".jpg"
    dwn = await client.send_message(
          text="<b>ğ——ğ—¼ğ˜„ğ—»ğ—¹ğ—¼ğ—®ğ—±ğ—¶ğ—»ğ—´...</b>",
          chat_id = message.chat.id,
          reply_to_message_id=message.message_id
          )          
    await client.download_media(
            message=message,
            file_name=imgdir
        )
    await dwn.edit_text("<b>ğ—¨ğ—½ğ—¹ğ—¼ğ—®ğ—±ğ—¶ğ—»ğ—´...</b>")
    try:
        response = upload_file(imgdir)
    except Exception as error:
        await dwn.edit_text(f"ğ—¢ğ—¼ğ—½ğ˜€ ğ—¦ğ—¼ğ—ºğ—²ğ˜ğ—µğ—¶ğ—»ğ—´ ğ—ªğ—²ğ—»ğ˜ ğ—ªğ—¿ğ—¼ğ—»ğ—´\n{error} Contact @HydraLivegrambot")
        return
    await dwn.edit_text(f"https://telegra.ph{response[0]}")
    try:
        os.remove(imgdir)
    except:
        pass

@Client.on_message(filters.video)
async def getvideo(client, message):
    location = "./FILES"
    if not os.path.isdir(location):
        os.makedirs(location)
    viddir = location + "/" + str(message.chat.id) + "/" + str(message.message_id) +".mp4"
    dwn = await client.send_message(
          text="<b>ğ——ğ—¼ğ˜„ğ—»ğ—¹ğ—¼ğ—®ğ—±ğ—¶ğ—»ğ—´...</b>",
          chat_id = message.chat.id,
          reply_to_message_id=message.message_id
          )          
    await client.download_media(
            message=message,
            file_name=viddir
        )
    await dwn.edit_text("<b>ğ—¨ğ—½ğ—¹ğ—¼ğ—®ğ—±ğ—¶ğ—»ğ—´...</b>")
    try:
        response = upload_file(viddir)
    except Exception as error:
        await dwn.edit_text(f"ğ—¢ğ—¼ğ—½ğ˜€ ğ—¦ğ—¼ğ—ºğ—²ğ˜ğ—µğ—¶ğ—»ğ—´ ğ—ªğ—²ğ—»ğ˜ ğ—ªğ—¿ğ—¼ğ—»ğ—´\n{error} Contact @HydraLivegrambot")
        return
    await dwn.edit_text(f"https://telegra.ph{response[0]}")
    try:
        os.remove(viddir)
    except:
        pass

